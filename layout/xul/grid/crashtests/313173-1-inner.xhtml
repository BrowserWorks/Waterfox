<?xml version="1.0"?>

<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>

<window title="Testcase bug - Crash with evil xul testcase, using -moz-grid/table-caption"
        xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<grid flex="1">
  <columns>
    <column flex="1"/>
  </columns>

  <rows>
    <row>
    </row>
  </rows>
</grid>

<html:script>
function doe(){
document.getElementsByTagName('columns')[0].style.display='table-caption';
setTimeout(doe2,20);
}
function doe2(){
document.getElementsByTagName('columns')[0].style.display='-moz-grid';
}     

function clickit() {
  var button = document.getElementById('button');
  var evt = document.createEvent("MouseEvents");
  evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
  button.dispatchEvent(evt);
setTimeout('clickit();', 20);
}
window.addEventListener('load', clickit, false);

</html:script>
        <html:button id="button" onclick="doe()" label="click">Clicking this should not crash Mozilla</html:button>
</window>

